Creating local yum repo mirrors
===============================

yum install yum-utils createrepo -y

CentOS mirror

cd /var/www/html

cat << EOF > sync-centos.sh
#!/bin/sh
#
# reposync
#

BASEDIR=/var/www/html/centos/6
mkdir -p \$BASEDIR
cd \$BASEDIR

reposync -n -r updates
repomanage -o -c updates | xargs rm -fv
createrepo updates

reposync -n -r base --downloadcomps
repomanage -o -c base | xargs rm -fv
createrepo base -g comps.xml
EOF

chmod 755 sync-centos.sh
sh sync-centos.sh

EPEL mirror
===========

rpm -ivh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
cd /var/www/html

cat << EOF > sync-epel.sh
#!/bin/sh
#
# reposync
#

BASEDIR=/var/www/html/centos/6
mkdir -p \$BASEDIR
cd \$BASEDIR

reposync -n -r epel
repomanage -o -c epel | xargs rm -fv
createrepo epel
EOF

chmod 755 sync-epel.sh
sh sync-epel.sh

Update all
==========

cd /var/www/html
for i in ls | grep sync; do sh $i; done
